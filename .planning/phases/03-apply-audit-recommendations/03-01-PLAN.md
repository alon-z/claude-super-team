---
phase: 03-apply-audit-recommendations
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - plugins/claude-super-team/skills/new-project/SKILL.md
  - plugins/claude-super-team/skills/create-roadmap/SKILL.md
  - plugins/claude-super-team/skills/discuss-phase/SKILL.md
  - plugins/claude-super-team/skills/research-phase/SKILL.md
  - plugins/claude-super-team/skills/plan-phase/SKILL.md
  - plugins/claude-super-team/skills/execute-phase/SKILL.md
  - plugins/claude-super-team/skills/quick-plan/SKILL.md
autonomous: true

must_haves:
  truths:
    - "All 7 core pipeline skills have specific Bash patterns instead of blanket Bash in their allowed-tools"
    - "new-project has disable-model-invocation: true preventing accidental auto-invocation"
    - "create-roadmap has no redundant disable-model-invocation: false line in its frontmatter"
  artifacts:
    - path: "plugins/claude-super-team/skills/new-project/SKILL.md"
      provides: "Bash restricted to git/mkdir/find/test patterns + disable-model-invocation: true"
    - path: "plugins/claude-super-team/skills/create-roadmap/SKILL.md"
      provides: "Bash restricted to test pattern, redundant field removed"
    - path: "plugins/claude-super-team/skills/discuss-phase/SKILL.md"
      provides: "Bash restricted to test/ls/grep/mkdir patterns"
    - path: "plugins/claude-super-team/skills/research-phase/SKILL.md"
      provides: "Bash restricted to test/ls/grep patterns"
    - path: "plugins/claude-super-team/skills/plan-phase/SKILL.md"
      provides: "Bash restricted to test/ls/grep/cat patterns"
    - path: "plugins/claude-super-team/skills/execute-phase/SKILL.md"
      provides: "Bash restricted to git/mkdir/ls/grep/test patterns"
    - path: "plugins/claude-super-team/skills/quick-plan/SKILL.md"
      provides: "Bash restricted to test/ls/grep/mkdir patterns"
  key_links:
    - from: "02-AUDIT.md per-skill Bash restriction mapping"
      to: "Each SKILL.md allowed-tools field"
      via: "Exact Bash(pattern) replacements per audit table"
---

<objective>
Apply frontmatter fixes to the 7 core pipeline skills: new-project, create-roadmap, discuss-phase, research-phase, plan-phase, execute-phase, and quick-plan.

Purpose: These 7 skills form the main sequential workflow. Fixing blanket Bash access and invocation control closes the most pervasive audit gaps across the primary user path.
Output: 7 updated SKILL.md files with specific Bash patterns, corrected invocation control, and cleaned frontmatter.
</objective>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-skill-audit-and-reclassification/02-AUDIT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix new-project and create-roadmap frontmatter</name>
  <files>
    plugins/claude-super-team/skills/new-project/SKILL.md
    plugins/claude-super-team/skills/create-roadmap/SKILL.md
  </files>
  <action>
**new-project/SKILL.md** -- Edit the YAML frontmatter (between the `---` delimiters):

1. Replace `allowed-tools: Read, Bash, Write, AskUserQuestion, Glob, Grep` with:
   ```yaml
   allowed-tools: Read, Write, AskUserQuestion, Glob, Grep, Bash(git *), Bash(mkdir *), Bash(find *), Bash(test *)
   ```
2. Add `disable-model-invocation: true` as a new line after `allowed-tools`.

The resulting frontmatter should be:
```yaml
---
name: new-project
description: Initialize a new project to produce .planning/PROJECT.md. Requires either a path to a project vision document (recommended) or a brief project idea as argument. Use when starting a new project, onboarding to existing codebase, or defining what to build next.
argument-hint: "<brief project idea OR path to project document>"
allowed-tools: Read, Write, AskUserQuestion, Glob, Grep, Bash(git *), Bash(mkdir *), Bash(find *), Bash(test *)
disable-model-invocation: true
---
```

**create-roadmap/SKILL.md** -- Edit the YAML frontmatter:

1. Replace `allowed-tools: Read, Bash, Write, AskUserQuestion, Glob, Grep` with:
   ```yaml
   allowed-tools: Read, Write, AskUserQuestion, Glob, Grep, Bash(test *)
   ```
2. Remove the line `disable-model-invocation: false` entirely (false is the default, so the line is redundant).

The resulting frontmatter should be:
```yaml
---
name: create-roadmap
description: Create or modify project roadmap with phased delivery plan and state tracking. Reads .planning/PROJECT.md (required) and optionally .planning/REQUIREMENTS.md. Produces .planning/ROADMAP.md and .planning/STATE.md. Use after /new-project to define phases, success criteria, and delivery order. Also use to add phases, insert urgent phases with decimal numbering, reorder phases, or replace an existing roadmap. Pass modification intent as arguments (e.g., "add a security phase", "insert urgent auth fix after phase 2", "reorder to prioritize payments").
argument-hint: "[modification description]"
allowed-tools: Read, Write, AskUserQuestion, Glob, Grep, Bash(test *)
---
```
  </action>
  <verify>
Read both SKILL.md files and confirm:
- new-project: `allowed-tools` contains `Bash(git *)`, `Bash(mkdir *)`, `Bash(find *)`, `Bash(test *)` (no blanket `Bash`), and `disable-model-invocation: true` is present
- create-roadmap: `allowed-tools` contains `Bash(test *)` (no blanket `Bash`), and no `disable-model-invocation` line exists
  </verify>
  <done>new-project has 4 specific Bash patterns + disable-model-invocation: true. create-roadmap has 1 specific Bash pattern and no redundant disable-model-invocation field.</done>
</task>

<task type="auto">
  <name>Task 2: Fix discuss-phase, research-phase, plan-phase, execute-phase, and quick-plan frontmatter</name>
  <files>
    plugins/claude-super-team/skills/discuss-phase/SKILL.md
    plugins/claude-super-team/skills/research-phase/SKILL.md
    plugins/claude-super-team/skills/plan-phase/SKILL.md
    plugins/claude-super-team/skills/execute-phase/SKILL.md
    plugins/claude-super-team/skills/quick-plan/SKILL.md
  </files>
  <action>
For each skill below, edit only the `allowed-tools` line in the YAML frontmatter. Replace blanket `Bash` with the specific patterns listed. Preserve all other frontmatter fields and the entire skill body unchanged.

**discuss-phase/SKILL.md:**
Replace `allowed-tools: Read, Write, Bash, Glob, Grep, AskUserQuestion, Task` with:
```yaml
allowed-tools: Read, Write, Glob, Grep, AskUserQuestion, Task, Bash(test *), Bash(ls *), Bash(grep *), Bash(mkdir *)
```

**research-phase/SKILL.md:**
Replace `allowed-tools: Read, Write, Bash, Glob, Grep, Task, AskUserQuestion` with:
```yaml
allowed-tools: Read, Write, Glob, Grep, Task, AskUserQuestion, Bash(test *), Bash(ls *), Bash(grep *)
```

**plan-phase/SKILL.md:**
Replace `allowed-tools: Read, Bash, Write, Glob, Grep, Task, AskUserQuestion` with:
```yaml
allowed-tools: Read, Write, Glob, Grep, Task, AskUserQuestion, Bash(test *), Bash(ls *), Bash(grep *), Bash(cat *)
```

**execute-phase/SKILL.md:**
Replace `allowed-tools: Read, Bash, Write, Glob, Grep, Task, AskUserQuestion, TaskCreate, TaskUpdate, TaskGet, TaskList, TaskOutput, TaskStop, TeamCreate, TeamDelete, SendMessage` with:
```yaml
allowed-tools: Read, Write, Glob, Grep, Task, AskUserQuestion, TaskCreate, TaskUpdate, TaskGet, TaskList, TaskOutput, TaskStop, TeamCreate, TeamDelete, SendMessage, Bash(git *), Bash(mkdir *), Bash(ls *), Bash(grep *), Bash(test *)
```

**quick-plan/SKILL.md:**
Replace `allowed-tools: Read, Bash, Write, Edit, Glob, Grep, Task, AskUserQuestion` with:
```yaml
allowed-tools: Read, Write, Edit, Glob, Grep, Task, AskUserQuestion, Bash(test *), Bash(ls *), Bash(grep *), Bash(mkdir *)
```
  </action>
  <verify>
Read each SKILL.md and confirm:
- No `allowed-tools` line contains a standalone `Bash` entry (without parenthesized pattern)
- discuss-phase has Bash(test *), Bash(ls *), Bash(grep *), Bash(mkdir *)
- research-phase has Bash(test *), Bash(ls *), Bash(grep *)
- plan-phase has Bash(test *), Bash(ls *), Bash(grep *), Bash(cat *)
- execute-phase has Bash(git *), Bash(mkdir *), Bash(ls *), Bash(grep *), Bash(test *) plus all Team/Task tools
- quick-plan has Bash(test *), Bash(ls *), Bash(grep *), Bash(mkdir *) plus Edit tool
  </verify>
  <done>All 5 skills have specific Bash patterns. No blanket Bash remains in any core pipeline skill.</done>
</task>

</tasks>

<verification>
For all 7 files modified by this plan:
1. Grep for `allowed-tools:.*[^(]Bash[^(]` across all 7 files -- should return zero matches (no blanket Bash)
2. Grep for `Bash(` across all 7 files -- should return 7 matches (one per file), each containing only parenthesized patterns
3. Confirm new-project has `disable-model-invocation: true`
4. Confirm create-roadmap has no `disable-model-invocation` line at all
5. Confirm no other frontmatter fields were altered (name, description, argument-hint, model, context, hooks all unchanged)
</verification>

<success_criteria>
All 7 core pipeline skills have specific Bash restriction patterns instead of blanket Bash. new-project prevents auto-invocation. create-roadmap has clean frontmatter with no redundant fields. All skill bodies remain unchanged.
</success_criteria>

<output>
After completion, create `.planning/phases/03-apply-audit-recommendations/03-01-SUMMARY.md`
</output>
