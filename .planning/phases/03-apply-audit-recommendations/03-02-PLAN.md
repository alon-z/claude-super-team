---
phase: 03-apply-audit-recommendations
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - plugins/claude-super-team/skills/phase-feedback/SKILL.md
  - plugins/claude-super-team/skills/brainstorm/SKILL.md
  - plugins/claude-super-team/skills/cst-help/SKILL.md
  - plugins/claude-super-team/skills/progress/SKILL.md
autonomous: true

must_haves:
  truths:
    - "All 4 skills have specific Bash patterns instead of blanket Bash"
    - "phase-feedback no longer declares TaskCreate, TaskUpdate, or TaskList in allowed-tools"
    - "brainstorm description is hardened to reduce false-positive auto-invocation"
    - "cst-help has argument-hint for direct questions"
    - "progress and cst-help use dynamic context injection to pre-load project state"
  artifacts:
    - path: "plugins/claude-super-team/skills/phase-feedback/SKILL.md"
      provides: "Bash restricted + unnecessary Task* tools removed"
    - path: "plugins/claude-super-team/skills/brainstorm/SKILL.md"
      provides: "Bash restricted + hardened description"
    - path: "plugins/claude-super-team/skills/cst-help/SKILL.md"
      provides: "Bash restricted + argument-hint + dynamic context injection"
    - path: "plugins/claude-super-team/skills/progress/SKILL.md"
      provides: "Bash restricted + dynamic context injection"
  key_links:
    - from: "02-AUDIT.md brainstorm description concern"
      to: "brainstorm/SKILL.md description field"
      via: "Hardened wording that reduces false-positive triggers on casual 'brainstorm' mentions"
    - from: "02-AUDIT.md dynamic context injection recommendation"
      to: "progress/SKILL.md and cst-help/SKILL.md skill body"
      via: "!`command` syntax in skill body for pre-loaded state"
---

<objective>
Apply frontmatter fixes and body enhancements to 4 interaction/status skills: phase-feedback, brainstorm, cst-help, and progress.

Purpose: Fix blanket Bash, remove unnecessary tools from phase-feedback, harden brainstorm's auto-invocation precision, add missing argument-hint to cst-help, and adopt dynamic context injection in progress and cst-help for faster state analysis.
Output: 4 updated SKILL.md files with tightened tool access and enhanced capabilities.
</objective>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-skill-audit-and-reclassification/02-AUDIT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix phase-feedback and brainstorm frontmatter</name>
  <files>
    plugins/claude-super-team/skills/phase-feedback/SKILL.md
    plugins/claude-super-team/skills/brainstorm/SKILL.md
  </files>
  <action>
**phase-feedback/SKILL.md** -- Edit the YAML frontmatter:

Replace `allowed-tools: Read, Bash, Write, Edit, Glob, Grep, Task, AskUserQuestion, TaskCreate, TaskUpdate, TaskList` with:
```yaml
allowed-tools: Read, Write, Edit, Glob, Grep, Task, AskUserQuestion, Bash(test *), Bash(ls *), Bash(grep *), Bash(mkdir *)
```

This does two things: (1) replaces blanket Bash with specific patterns, (2) removes TaskCreate, TaskUpdate, and TaskList which are not used in any of the skill's process steps (principle of least privilege).

**brainstorm/SKILL.md** -- Edit the YAML frontmatter:

1. Replace `allowed-tools: Read, Write, Bash, Glob, Grep, AskUserQuestion, Task, Skill` with:
   ```yaml
   allowed-tools: Read, Write, Glob, Grep, AskUserQuestion, Task, Skill, Bash(test *), Bash(ls *), Bash(cat *)
   ```

2. Replace the current description:
   ```
   description: Brainstorm features, improvements, and architectural changes for a project. Two modes -- Interactive (collaborative discussion) or Autonomous (Claude deeply analyzes the project and generates bold, creative ideas on its own). Captures decisions in IDEAS.md and optionally updates ROADMAP.md. Use when thinking about what to build next.
   ```
   with this hardened version that reduces false-positive auto-invocation on casual "brainstorm" mentions:
   ```
   description: "Run a structured brainstorming session for project features, improvements, and architecture. Two modes: Interactive (collaborative Q&A) or Autonomous (3 parallel agents analyze codebase and generate ideas). Captures decisions in IDEAS.md, optionally updates ROADMAP.md. Invoke explicitly with /brainstorm -- not for casual ideation mentions."
   ```

The key changes to the description:
- Leads with "Run a structured brainstorming session" instead of just "Brainstorm" (less likely to match casual mentions)
- Adds explicit "Invoke explicitly with /brainstorm -- not for casual ideation mentions" to guide the invocation model
- Wraps in quotes to preserve the em-dash
  </action>
  <verify>
Read both SKILL.md files and confirm:
- phase-feedback: `allowed-tools` has 4 specific Bash patterns, does NOT contain `TaskCreate`, `TaskUpdate`, or `TaskList`, does NOT contain standalone `Bash`
- brainstorm: `allowed-tools` has 3 specific Bash patterns (test, ls, cat), does NOT contain standalone `Bash`, and description starts with "Run a structured brainstorming session" and ends with "not for casual ideation mentions."
  </verify>
  <done>phase-feedback has tightened tools (no Task*, specific Bash). brainstorm has specific Bash patterns and hardened description to reduce false-positive auto-invocation.</done>
</task>

<task type="auto">
  <name>Task 2: Fix cst-help and progress frontmatter + add dynamic context injection</name>
  <files>
    plugins/claude-super-team/skills/cst-help/SKILL.md
    plugins/claude-super-team/skills/progress/SKILL.md
  </files>
  <action>
**cst-help/SKILL.md** -- Edit the YAML frontmatter:

1. Replace `allowed-tools: Read, Bash, Grep, Glob, AskUserQuestion` with:
   ```yaml
   allowed-tools: Read, Grep, Glob, AskUserQuestion, Bash(test *), Bash(ls *), Bash(grep *), Bash(find *)
   ```

2. Add `argument-hint: "[question]"` as a new line after the `model: haiku` line.

The resulting frontmatter should be:
```yaml
---
name: cst-help
description: Interactive help system for Claude Super Team workflow. Analyzes current project state in .planning/ to provide context-aware guidance on which skill to run next. Explains workflow concepts, troubleshoots issues, provides skill reference. Use when user asks "what's next?", "how does this work?", "I'm stuck", or needs help understanding the planning pipeline.
allowed-tools: Read, Grep, Glob, AskUserQuestion, Bash(test *), Bash(ls *), Bash(grep *), Bash(find *)
model: haiku
argument-hint: "[question]"
---
```

3. Add dynamic context injection at the very beginning of the skill body (right after the closing `---` of frontmatter, before `## Objective`). Insert this block:

```markdown

<!-- Dynamic context injection: pre-load project state before skill body executes -->
!`ls .planning/ 2>/dev/null`
!`ls .planning/phases/ 2>/dev/null`

```

This pre-loads the planning directory listing so cst-help can immediately assess project state without burning Bash calls during execution.

**progress/SKILL.md** -- Edit the YAML frontmatter:

Replace `allowed-tools: Read, Bash, Grep, Glob` with:
```yaml
allowed-tools: Read, Grep, Glob, Bash(test *), Bash(ls *), Bash(find *), Bash(grep *)
```

All other frontmatter fields (name, description, context: fork, model: haiku) remain unchanged.

Add dynamic context injection at the very beginning of the skill body (right after the closing `---` of frontmatter, before `## Objective`). Insert this block:

```markdown

<!-- Dynamic context injection: pre-load project state for faster analysis -->
!`ls .planning/ 2>/dev/null`
!`ls -d .planning/phases/*/ 2>/dev/null`
!`cat .planning/STATE.md 2>/dev/null | head -20`

```

This pre-loads the planning structure, phase directories, and current state before the skill body executes, reducing the number of Bash calls needed during the process phases.
  </action>
  <verify>
Read both SKILL.md files and confirm:
- cst-help: `allowed-tools` has 4 specific Bash patterns (no blanket Bash), `argument-hint: "[question]"` exists, dynamic context injection block (lines starting with `!`) appears before `## Objective`
- progress: `allowed-tools` has 4 specific Bash patterns (no blanket Bash), dynamic context injection block appears before `## Objective`, all other frontmatter unchanged (still has `context: fork` and `model: haiku`)
  </verify>
  <done>cst-help has specific Bash, argument-hint, and dynamic context injection. progress has specific Bash and dynamic context injection. Both pre-load project state for faster analysis.</done>
</task>

</tasks>

<verification>
For all 4 files modified by this plan:
1. Grep for standalone `Bash` (without parentheses) in allowed-tools -- should return zero matches
2. Confirm phase-feedback does NOT have TaskCreate, TaskUpdate, or TaskList in allowed-tools
3. Confirm brainstorm description contains "not for casual ideation mentions"
4. Confirm cst-help has `argument-hint: "[question]"`
5. Confirm both progress and cst-help have `!` `` ` `` command lines in their body before ## Objective
6. Confirm no skill body logic was altered (only frontmatter + dynamic context injection block added)
</verification>

<success_criteria>
All 4 interaction/status skills have specific Bash patterns. phase-feedback follows least privilege (no Task* tools). brainstorm has hardened description. cst-help has argument-hint. progress and cst-help use dynamic context injection for pre-loaded state.
</success_criteria>

<output>
After completion, create `.planning/phases/03-apply-audit-recommendations/03-02-SUMMARY.md`
</output>
